# RunPick Codex Context

이 문서는 Codex/AI 에이전트가 이 저장소를 빠르게 파악하고 안전하게 수정하기 위한 프로젝트 메모입니다.

## 1) Project Snapshot

- 프로젝트 성격: ASICS 러닝화 카탈로그 + 5문항 추천 퀴즈
- 프레임워크: Next.js App Router (`next@16`) + React 19 + TypeScript
- 렌더링 전략: 정적 export 중심 (`next.config.ts`의 `output: "export"`)
- 데이터 소스: `src/data/brands/asics.json` (단일 소스, API/DB 없음)
- 스타일/애니메이션: Tailwind CSS 4 + Framer Motion + GSAP + Lenis

## 2) Dev Commands

```bash
npm run dev
npm run build
npm run start
npm run lint
```

## 3) Main Route Map

- `/` 홈 (Hero, Category, Featured, Quiz CTA)
- `/quiz` 퀴즈 5문항 -> 분석 애니메이션 -> 추천 결과
- `/brand/[brandId]` 브랜드 통합 카탈로그 (현재 `asics`만 static params 생성)
- `/brand/[brandId]/[category]` 카테고리 페이지 (`daily`, `super-trainer`, `racing`)
- `/shoe/[shoeId]` 신발 상세 페이지 (slug 기반 static params 생성)

핵심 페이지 파일:

- `src/app/page.tsx`
- `src/app/quiz/page.tsx`
- `src/app/brand/[brandId]/page.tsx`
- `src/app/brand/[brandId]/[category]/page.tsx`
- `src/app/shoe/[shoeId]/page.tsx`

## 4) Data and Domain Model

- 브랜드/상품 원본: `src/data/brands/asics.json`
  - 현재 12개 모델 (카테고리별 4개씩)
- 카테고리/서브카테고리 정의: `src/data/categories.ts`
- 타입 정의:
  - 신발: `src/types/shoe.ts`
  - 퀴즈: `src/types/quiz.ts`
- 조회 유틸: `src/utils/shoe-utils.ts`
  - `getAllShoes()`는 원본 순서를 유지
  - `getShoesByCategory`, `getShoesBySubcategory`, `getShoesByBrand`는 이름 기준 정렬

## 5) Quiz Logic Quick Notes

- 질문 데이터: `src/data/quiz-questions.ts` (5개 질문, 각 옵션에 category score)
- 스코어 계산: `src/utils/quiz-logic.ts`
  - 40% 속성 매칭 + 40% 카테고리 매칭 + 20% 경험 보정
  - 최종 match score는 60~98로 clamp
- 퀴즈 페이지: `src/app/quiz/page.tsx`
  - 옵션 선택 시 자동 진행
  - 마지막 질문 뒤 `analyzing` 단계를 거쳐 결과 렌더

## 6) UI Composition and Effects

- 루트 서버 레이아웃: `src/app/layout.tsx`
- 글로벌 클라이언트 래퍼: `src/components/layout/LayoutClient.tsx`
  - `GrainOverlay`, `ScrollProgress`, `CustomCursor`, `SmoothScroll`, `PageTransition` 포함
- 홈 섹션:
  - `src/components/hero/HeroSection.tsx`
  - `src/components/hero/CategoryNav.tsx`
  - `src/components/hero/FeaturedShoes.tsx`
  - `src/components/hero/QuizCTA.tsx`

## 7) Animation/Performance Conventions

- 무거운 스크롤/GSAP 로직은 `useIsDesktop()` 가드로 데스크탑에서만 실행
  - 훅: `src/hooks/useIsDesktop.ts`
- 공통 애니메이션 상수는 `src/constants/animation.ts` 사용
- GSAP `.to()` 애니메이션 초기값 플래시 방지를 위해 CSS 초기 상태를 `src/app/globals.css`에 선언
- 모바일 성능 fallback도 `src/app/globals.css` 하단 media query에 모여 있음

## 8) Change Playbook

신발 모델 추가:

1. `src/data/brands/asics.json`에 새 모델 추가
2. `public/shoes/`에 이미지 추가
3. `categoryId`, `subcategoryId`, `slug`, `priceFormatted` 일관성 확인

카테고리/서브카테고리 추가:

1. `src/types/shoe.ts`의 `CategoryId`/`SubcategoryId` 갱신
2. `src/data/categories.ts` 갱신
3. 관련 페이지 정적 params/필터 동작 확인

퀴즈 튜닝:

1. 질문/점수 가중치: `src/data/quiz-questions.ts`
2. 매칭 규칙: `src/utils/quiz-logic.ts`
3. 결과 UI: `src/components/quiz/QuizResult.tsx`

## 9) Gotchas

- `next.config.ts`에 `trailingSlash: true`가 설정되어 있어 URL/링크 변경 시 정적 export 결과 확인 필요
- 이미지 최적화는 `unoptimized: true`로 비활성 (`next/image`는 static export 친화 모드)
- 폰트는 `next/font`가 아니라 CDN `<link>` 방식 (`src/app/layout.tsx`)
- 저장소 루트에 시각 검증용 PNG/JPEG가 매우 많음 (대부분 런타임 코드와 무관)
- `src/app/quiz/result` 디렉토리는 현재 실사용 파일이 없음

## 10) Pre-merge Checklist (Suggested)

```bash
npm run lint
npm run build
```

기능 변경 시 데스크탑/모바일 모두에서 아래를 최소 확인:

- 헤더 hide/show + 고정 탭 위치
- Featured horizontal section 동작
- Quiz 완료 흐름
- Shoe detail 유사 모델 섹션/스크롤
